import{u as n,a as e,j as a,s,t as r,v as i,w as o,l as t,o as l,x as c}from"./index-sK2loqLz.js";import{r as d,N as p,L as x}from"./router-5U3rcizL.js";import{N as m}from"./Navbar-B2cPrdsN.js";function f(){const{user:f,isAuthenticated:g,loading:b}=n(),[u,h]=d.useState([]),[j,y]=d.useState(!0),[v,N]=d.useState(""),[w,k]=d.useState("purchases");d.useEffect(()=>{g&&f?.email&&z()},[g,f]);const z=async()=>{try{y(!0),N("");const n=await e(`/api/purchases/by-email?email=${encodeURIComponent(f.email)}`);n.success?h(n.data||[]):h([])}catch(n){N("Erro ao conectar com o servidor")}finally{y(!1)}};return b||g?a.jsxs("div",{className:"my-account-page page-with-background",children:[a.jsx(m,{}),a.jsx("section",{className:"section-block","aria-label":"Minha Conta",children:a.jsxs("div",{className:"account-container",children:[a.jsxs("header",{className:"profile-header",children:[a.jsx("div",{className:"profile-avatar",children:a.jsx(s,{})}),a.jsxs("div",{className:"profile-info",children:[a.jsx("h1",{className:"profile-name",children:f?.name||"Usuario"}),a.jsx("p",{className:"profile-email",children:f?.email})]})]}),a.jsxs("div",{className:"tabs",children:[a.jsxs("button",{className:"tab "+("purchases"===w?"tabActive":""),onClick:()=>k("purchases"),children:[a.jsx(r,{})," Minhas Compras"]}),a.jsxs("button",{className:"tab "+("profile"===w?"tabActive":""),onClick:()=>k("profile"),children:[a.jsx(s,{})," Meu Perfil"]})]}),a.jsxs("div",{className:"tab-content",children:["purchases"===w&&a.jsx("div",{className:"purchases-section",children:j?a.jsxs("div",{className:"loading",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Carregando compras..."})]}):v?a.jsxs("div",{className:"error-message",children:[a.jsx(i,{}),a.jsx("p",{children:v})]}):0===u.length?a.jsxs("div",{className:"empty-state",children:[a.jsx(r,{className:"empty-icon"}),a.jsx("h3",{children:"Nenhuma compra encontrada"}),a.jsx("p",{children:"Voce ainda nao realizou nenhuma compra."}),a.jsx(x,{to:"/aplicativos",className:"browse-btn",children:"Ver Aplicativos"})]}):a.jsx("div",{className:"purchases-list",children:u.map(n=>{const e=(n=>n.activatedAt?{icon:a.jsx(l,{}),text:"Ativada",className:"statusActive"}:{icon:a.jsx(c,{}),text:"Pendente",className:"statusPending"})(n);return a.jsxs("div",{className:"purchase-card",children:[a.jsxs("div",{className:"purchase-info",children:[a.jsx("h3",{className:"purchase-name",children:n.appName||`App #${n.appId}`}),a.jsxs("div",{className:"purchase-details",children:[a.jsxs("span",{className:"purchase-date",children:[a.jsx(o,{})," ",(s=n.createdAt,s?new Date(s).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-")]}),a.jsxs("span",{className:`purchase-status ${e.className}`,children:[e.icon," ",e.text]})]}),n.licenseKey&&a.jsxs("div",{className:"license-key",children:[a.jsx("span",{className:"license-label",children:"Chave:"}),a.jsx("code",{className:"license-code",children:n.licenseKey})]})]}),a.jsx("div",{className:"purchase-actions",children:a.jsx("button",{className:"download-btn",title:"Download",children:a.jsx(t,{})})})]},n.id);var s})})}),"profile"===w&&a.jsx("div",{className:"profile-section",children:a.jsxs("div",{className:"profile-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Nome"}),a.jsx("input",{type:"text",value:f?.name||"",readOnly:!0,className:"input-readonly"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"E-mail"}),a.jsx("input",{type:"email",value:f?.email||"",readOnly:!0,className:"input-readonly"})]}),a.jsx("p",{className:"profile-note",children:"Para alterar seus dados, entre em contato com o suporte."})]})})]})]})}),a.jsx("style",{children:"\n        .my-account-page { min-height: 100vh; }\n        .section-block { padding: var(--espaco-3xl) var(--espaco-xl); }\n\n        .account-container {\n          max-width: 800px;\n          margin: 0 auto;\n          background: rgba(20, 20, 25, 0.9);\n          border-radius: 16px;\n          padding: 0;\n          box-shadow: 0 12px 32px rgba(0,0,0,0.3);\n          border: 1px solid rgba(255,255,255,0.08);\n          overflow: hidden;\n        }\n\n        .profile-header {\n          display: flex;\n          align-items: center;\n          gap: 20px;\n          padding: 32px;\n          background: linear-gradient(135deg, rgba(0,228,242,0.1) 0%, rgba(209,43,242,0.1) 100%);\n          border-bottom: 1px solid rgba(255,255,255,0.08);\n        }\n\n        .profile-avatar {\n          width: 72px;\n          height: 72px;\n          border-radius: 50%;\n          background: linear-gradient(135deg, #00E4F2 0%, #D12BF2 100%);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #0a0a0f;\n          font-size: 1.8rem;\n        }\n\n        .profile-name {\n          font-family: 'Montserrat', system-ui, sans-serif;\n          font-weight: 700;\n          font-size: 1.5rem;\n          color: #f1f5f9;\n          margin: 0;\n        }\n\n        .profile-email {\n          font-family: 'Inter', system-ui, sans-serif;\n          color: #94a3b8;\n          margin: 4px 0 0;\n          font-size: 0.95rem;\n        }\n\n        .tabs {\n          display: flex;\n          border-bottom: 1px solid rgba(255,255,255,0.08);\n        }\n\n        .tab {\n          flex: 1;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          gap: 8px;\n          padding: 16px;\n          background: none;\n          border: none;\n          color: #94a3b8;\n          font-family: 'Poppins', system-ui, sans-serif;\n          font-size: 0.95rem;\n          font-weight: 500;\n          cursor: pointer;\n          transition: all 0.25s ease;\n          border-bottom: 2px solid transparent;\n        }\n\n        .tab:hover {\n          color: #f1f5f9;\n          background: rgba(255,255,255,0.03);\n        }\n\n        .tabActive {\n          color: #00E4F2;\n          border-bottom-color: #00E4F2;\n        }\n\n        .tab-content {\n          padding: 24px;\n        }\n\n        .loading {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          gap: 12px;\n          padding: 48px;\n          color: #94a3b8;\n        }\n\n        .spinner {\n          width: 36px;\n          height: 36px;\n          border: 3px solid rgba(255,255,255,0.1);\n          border-top-color: #00E4F2;\n          border-radius: 50%;\n          animation: spin 0.8s linear infinite;\n        }\n\n        @keyframes spin { to { transform: rotate(360deg); } }\n\n        .error-message {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          padding: 16px;\n          background: rgba(239, 68, 68, 0.1);\n          border: 1px solid rgba(239, 68, 68, 0.3);\n          border-radius: 10px;\n          color: #f87171;\n        }\n\n        .empty-state {\n          text-align: center;\n          padding: 48px 24px;\n        }\n\n        .empty-icon {\n          font-size: 3rem;\n          color: #475569;\n          margin-bottom: 16px;\n        }\n\n        .empty-state h3 {\n          font-family: 'Montserrat', system-ui, sans-serif;\n          color: #f1f5f9;\n          margin: 0 0 8px;\n        }\n\n        .empty-state p {\n          color: #94a3b8;\n          margin: 0 0 24px;\n        }\n\n        .browse-btn {\n          display: inline-block;\n          padding: 12px 28px;\n          background: linear-gradient(135deg, #00E4F2 0%, #D12BF2 100%);\n          color: #0a0a0f;\n          text-decoration: none;\n          border-radius: 10px;\n          font-weight: 600;\n          transition: transform 0.2s, box-shadow 0.2s;\n        }\n\n        .browse-btn:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 8px 20px rgba(0,228,242,0.3);\n        }\n\n        .purchases-list {\n          display: flex;\n          flex-direction: column;\n          gap: 12px;\n        }\n\n        .purchase-card {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 16px 20px;\n          background: rgba(255,255,255,0.03);\n          border: 1px solid rgba(255,255,255,0.08);\n          border-radius: 12px;\n          transition: border-color 0.2s;\n        }\n\n        .purchase-card:hover {\n          border-color: rgba(0,228,242,0.3);\n        }\n\n        .purchase-name {\n          font-family: 'Poppins', system-ui, sans-serif;\n          font-size: 1rem;\n          font-weight: 600;\n          color: #f1f5f9;\n          margin: 0 0 8px;\n        }\n\n        .purchase-details {\n          display: flex;\n          align-items: center;\n          gap: 16px;\n          flex-wrap: wrap;\n        }\n\n        .purchase-date {\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          font-size: 0.85rem;\n          color: #94a3b8;\n        }\n\n        .purchase-status {\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          font-size: 0.85rem;\n          padding: 4px 10px;\n          border-radius: 20px;\n        }\n\n        .statusActive {\n          background: rgba(34, 197, 94, 0.15);\n          color: #22c55e;\n        }\n\n        .statusPending {\n          background: rgba(234, 179, 8, 0.15);\n          color: #eab308;\n        }\n\n        .license-key {\n          margin-top: 10px;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          flex-wrap: wrap;\n        }\n\n        .license-label {\n          font-size: 0.8rem;\n          color: #64748b;\n        }\n\n        .license-code {\n          font-family: 'Fira Code', monospace;\n          font-size: 0.8rem;\n          background: rgba(0,0,0,0.3);\n          padding: 4px 10px;\n          border-radius: 6px;\n          color: #00E4F2;\n        }\n\n        .purchase-actions {\n          display: flex;\n          gap: 8px;\n        }\n\n        .download-btn {\n          width: 40px;\n          height: 40px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background: rgba(0,228,242,0.1);\n          border: 1px solid rgba(0,228,242,0.3);\n          border-radius: 8px;\n          color: #00E4F2;\n          cursor: pointer;\n          transition: all 0.2s;\n        }\n\n        .download-btn:hover {\n          background: rgba(0,228,242,0.2);\n          transform: translateY(-1px);\n        }\n\n        .profile-section {\n          max-width: 500px;\n        }\n\n        .profile-form {\n          display: flex;\n          flex-direction: column;\n          gap: 16px;\n        }\n\n        .form-group {\n          display: flex;\n          flex-direction: column;\n          gap: 6px;\n        }\n\n        .form-group label {\n          font-family: 'Inter', system-ui, sans-serif;\n          font-size: 0.9rem;\n          color: #94a3b8;\n        }\n\n        .input-readonly {\n          padding: 12px 14px;\n          background: rgba(255,255,255,0.03);\n          border: 1px solid rgba(255,255,255,0.1);\n          border-radius: 10px;\n          color: #f1f5f9;\n          font-family: 'Inter', system-ui, sans-serif;\n          font-size: 0.95rem;\n        }\n\n        .profile-note {\n          margin-top: 8px;\n          font-size: 0.85rem;\n          color: #64748b;\n        }\n\n        @media (max-width: 600px) {\n          .section-block { padding: var(--espaco-xl) var(--espaco-md); }\n\n          .profile-header {\n            flex-direction: column;\n            text-align: center;\n            padding: 24px;\n          }\n\n          .profile-avatar {\n            width: 64px;\n            height: 64px;\n            font-size: 1.5rem;\n          }\n\n          .profile-name { font-size: 1.25rem; }\n\n          .tab { font-size: 0.85rem; padding: 12px; }\n\n          .tab-content { padding: 16px; }\n\n          .purchase-card {\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 12px;\n          }\n\n          .purchase-actions {\n            width: 100%;\n            justify-content: flex-end;\n          }\n        }\n      "})]}):a.jsx(p,{to:"/login",replace:!0})}export{f as default};
