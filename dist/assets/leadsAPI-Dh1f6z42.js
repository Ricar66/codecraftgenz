"undefined"!=typeof window&&!window.location.hostname.includes("localhost")&&window.location.hostname.includes("127.0.0.1");const e=(()=>"https://app.trackpro.com.br/api/v1/public/leads/webhook")();function t(e,t={}){try{"undefined"!=typeof window&&window.tpLayer&&window.tpLayer.push({event:e,...t,timestamp:(new Date).toISOString()})}catch(a){}}async function a(t){try{const a=function(){if("undefined"==typeof window)return{};const e=new URLSearchParams(window.location.search);return{utm_source:e.get("utm_source")||"",utm_medium:e.get("utm_medium")||"",utm_campaign:e.get("utm_campaign")||"",utm_term:e.get("utm_term")||"",utm_content:e.get("utm_content")||""}}(),n={name:t.name||"",email:t.email||"",phone:t.phone||"",custom:{form_id:t.formId||"unknown",...t.customFields||{}},...a,page_url:"undefined"!=typeof window?window.location.href:"",referrer:"undefined"!=typeof document?document.referrer:""};0;const o=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":"tp_d50cddbcae54fc3c57608ca271b2a6470b7b3a7878421a07"},body:JSON.stringify(n)});if(!o.ok){const e=await o.json().catch(()=>({}));throw new Error(e.error||e.message||`HTTP ${o.status}`)}return{success:!0,...await o.json()}}catch(a){return{success:!1,error:a.message}}}async function n(e){return t("lead_capture",{form_id:"crafter-signup",lead_type:"crafter",area_interesse:e.area_interesse,cidade:e.cidade,estado:e.estado}),a({formId:"crafter-signup",name:e.nome,email:e.email,phone:e.telefone,customFields:{cidade:e.cidade,estado:e.estado,area_interesse:e.area_interesse,mensagem:e.mensagem}})}async function o(e,n,o){return t("lead_capture",{form_id:"app-purchase",lead_type:"purchase_intent",app_id:String(n),app_name:o}),t("purchase_intent",{app_id:String(n),app_name:o}),a({formId:"app-purchase",name:e.name,email:e.email,phone:e.phone,customFields:{appId:String(n),appName:o,cpf:e.identification,zip:e.zip,streetName:e.streetName}})}async function r(e){return t("lead_capture",{form_id:"feedback",lead_type:"feedback",rating:e.rating}),a({formId:"feedback",name:e.nome||e.name,email:e.email,customFields:{rating:e.rating,comment:e.comment||e.mensagem}})}export{r as a,o as b,n as c};
