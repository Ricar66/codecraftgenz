import{j as a,c as e,a7 as s,a8 as r,a9 as n,aa as i}from"./index-DQkRuPgL.js";import{r as t}from"./router-Bh7m2j_b.js";import{u as l,C as c}from"./useAdminRepo-CbCCtI2A.js";import{A as o}from"./AdminCard-ChVCY5T3.js";import{S as d}from"./StatusBadge-C-iKibtv.js";import"./realtime-BxkdmVbQ.js";import"./projectsAPI-me_sk8Ob.js";import"./dataCache-D0LcSMWP.js";import"./rankingAPI-BHWt9I6k.js";import"./userAPI-B3dychSI.js";const h="_page_r40nh_7",_="_header_r40nh_19",m="_headerTitle_r40nh_33",j="_headerIcon_r40nh_45",x="_filters_r40nh_89",p="_searchBox_r40nh_103",v="_searchIcon_r40nh_115",u="_searchInput_r40nh_133",N="_filterGroup_r40nh_165",g="_filterSelect_r40nh_179",f="_sortBtn_r40nh_211",C="_craftersGrid_r40nh_247",P="_emptyCard_r40nh_261",b="_emptyState_r40nh_269",S="_crafterCard_r40nh_281",A="_cardHeader_r40nh_303",y="_crafterInfo_r40nh_321",B="_avatar_r40nh_333",I="_avatarPlaceholder_r40nh_347",E="_crafterName_r40nh_373",k="_cardBody_r40nh_385",T="_infoRow_r40nh_399",O="_infoLabel_r40nh_411",w="_infoValue_r40nh_421",M="_pointsBadge_r40nh_439",G="_starIcon_r40nh_463",R="_cardFooter_r40nh_471",$="_editBtn_r40nh_485",q="_deleteBtn_r40nh_487",z="_pagination_r40nh_559",D="_paginationInfo_r40nh_579",F="_paginationControls_r40nh_589",H="_pageNumbers_r40nh_601",L="_pageBtn_r40nh_611",Q="_active_r40nh_655",U="_loadingState_r40nh_671",V="_spinner_r40nh_691",Z="_loadingOverlay_r40nh_709",J="_spinnerSmall_r40nh_731",K="_errorState_r40nh_757",W="_retryBtn_r40nh_787";function X(){const[X,Y]=t.useState(""),[aa,ea]=t.useState(1),[sa,ra]=t.useState(10),[na,ia]=t.useState("nome"),[ta,la]=t.useState("asc"),[ca,oa]=t.useState("all"),da=t.useMemo(()=>({page:aa,limit:sa,search:X,active_only:"active"===ca||"inactive"!==ca&&void 0,order_by:na,order_direction:ta}),[aa,sa,X,ca,na,ta]),{crafters:ha,pagination:_a,loading:ma,error:ja,reload:xa,loadPage:pa}=l(da);t.useEffect(()=>{1!==aa&&ea(1)},[aa,X,ca,na,ta]);const va=a=>{ea(a),pa(a)};return ma&&0===ha.length?a.jsx("div",{className:h,children:a.jsxs("div",{className:U,children:[a.jsx("div",{className:V}),a.jsx("p",{children:"Carregando crafters..."})]})}):ja?a.jsx("div",{className:h,children:a.jsx(o,{variant:"outlined",children:a.jsxs("div",{className:K,children:[a.jsx("h3",{children:"Erro ao carregar crafters"}),a.jsx("p",{children:ja}),a.jsx("button",{onClick:xa,className:W,children:"Tentar novamente"})]})})}):a.jsxs("div",{className:h,children:[a.jsx("header",{className:_,children:a.jsxs("div",{className:m,children:[a.jsx(e,{className:j}),a.jsxs("div",{children:[a.jsx("h1",{children:"Gerenciar Crafters"}),a.jsxs("p",{children:["Total: ",_a.total," | Página ",_a.page," de ",_a.totalPages]})]})]})}),a.jsxs("section",{className:x,children:[a.jsxs("div",{className:p,children:[a.jsx(s,{className:v}),a.jsx("input",{type:"text",placeholder:"Buscar por nome ou email...",value:X,onChange:a=>{return e=a.target.value,Y(e),void ea(1);var e},className:u})]}),a.jsxs("div",{className:N,children:[a.jsxs("select",{value:ca,onChange:a=>oa(a.target.value),className:g,children:[a.jsx("option",{value:"all",children:"Todos os crafters"}),a.jsx("option",{value:"active",children:"Apenas ativos"}),a.jsx("option",{value:"inactive",children:"Apenas inativos"})]}),a.jsxs("select",{value:sa,onChange:a=>{return e=Number(a.target.value),ra(e),void ea(1);var e},className:g,children:[a.jsx("option",{value:5,children:"5 por página"}),a.jsx("option",{value:10,children:"10 por página"}),a.jsx("option",{value:25,children:"25 por página"}),a.jsx("option",{value:50,children:"50 por página"})]}),a.jsxs("select",{value:na,onChange:a=>{return e=a.target.value,na===e?la("asc"===ta?"desc":"asc"):(ia(e),la("asc")),void ea(1);var e},className:g,children:[a.jsx("option",{value:"nome",children:"Ordenar: Nome"}),a.jsx("option",{value:"email",children:"Ordenar: Email"}),a.jsx("option",{value:"points",children:"Ordenar: Pontos"}),a.jsx("option",{value:"active",children:"Ordenar: Status"})]}),a.jsxs("button",{onClick:()=>la("asc"===ta?"desc":"asc"),className:f,children:[(ua=na,na!==ua?"↕️":"asc"===ta?"↑":"↓")," ","asc"===ta?"Asc":"Desc"]})]})]}),a.jsx("section",{className:C,children:0===ha.length?a.jsx(o,{variant:"outlined",className:P,children:a.jsx("div",{className:b,children:a.jsx("p",{children:X||"all"!==ca?"Nenhum crafter encontrado com os filtros aplicados.":"Nenhum crafter cadastrado."})})}):ha.map(e=>a.jsxs(o,{variant:"elevated",hoverable:!0,className:S,children:[a.jsxs("div",{className:A,children:[a.jsxs("div",{className:y,children:[e.avatar_url?a.jsx("img",{src:e.avatar_url,alt:e.nome,className:B}):a.jsx("div",{className:I,children:e.nome?.charAt(0).toUpperCase()}),a.jsx("span",{className:E,children:e.nome})]}),a.jsx(d,{variant:e.active?"success":"error",dot:!0,pulse:e.active,children:e.active?"Ativo":"Inativo"})]}),a.jsxs("div",{className:k,children:[a.jsxs("div",{className:T,children:[a.jsx("span",{className:O,children:"Email"}),a.jsx("span",{className:w,children:e.email||"-"})]}),a.jsxs("div",{className:T,children:[a.jsx("span",{className:O,children:"Pontos"}),a.jsxs("span",{className:M,children:[a.jsx(r,{className:G})," ",e.points||0]})]})]}),a.jsxs("div",{className:R,children:[a.jsxs("button",{className:$,onClick:()=>{},title:"Editar crafter",children:[a.jsx(n,{})," Editar"]}),a.jsxs("button",{className:q,onClick:()=>(async a=>{if(window.confirm("Tem certeza que deseja excluir este crafter?"))try{await c.delete(a),xa()}catch(e){alert("Erro ao excluir crafter: "+e.message)}})(e.id),title:"Excluir crafter",children:[a.jsx(i,{})," Excluir"]})]})]},e.id))}),_a.totalPages>1&&a.jsxs(o,{variant:"outlined",className:z,children:[a.jsxs("div",{className:D,children:["Mostrando ",(_a.page-1)*sa+1," a ",Math.min(_a.page*sa,_a.total)," de ",_a.total]}),a.jsxs("div",{className:F,children:[a.jsx("button",{onClick:()=>va(_a.page-1),disabled:!_a.hasPrev||ma,className:L,children:"← Anterior"}),a.jsx("div",{className:H,children:Array.from({length:Math.min(5,_a.totalPages)},(e,s)=>{let r;return r=_a.totalPages<=5||_a.page<=3?s+1:_a.page>=_a.totalPages-2?_a.totalPages-4+s:_a.page-2+s,a.jsx("button",{onClick:()=>va(r),disabled:ma,className:`${L} ${r===_a.page?Q:""}`,children:r},r)})}),a.jsx("button",{onClick:()=>va(_a.page+1),disabled:!_a.hasNext||ma,className:L,children:"Próxima →"})]})]}),ma&&ha.length>0&&a.jsx("div",{className:Z,children:a.jsx("div",{className:J})})]});var ua}export{X as default};
