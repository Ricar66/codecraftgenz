import{a}from"./index-CIPZqoX5.js";async function e(){try{const e=await a("/api/auth/users",{method:"GET"});return(Array.isArray(e?.data?.users)?e.data.users:Array.isArray(e?.data)?e.data:Array.isArray(e?.users)?e.users:Array.isArray(e)?e:[]).map(a=>({id:String(a.id??a.user_id??""),name:a.nome??a.name??"",email:a.email??"",role:a.role??"viewer",status:"ativo"===a.status||"active"===a.status?"active":"inactive"}))}catch(e){throw e}}async function r(e){try{const r=await a("/api/auth/users",{method:"POST",body:JSON.stringify({nome:e.name,email:e.email,senha:e.password,role:e.role||"viewer"})}),t=r?.data?.user||r?.user||r?.data;if(!t)throw new Error("Resposta inválida do servidor");return{ok:!0,data:{id:String(t.id),name:t.name||t.nome,email:t.email,role:t.role,status:"ativo"===t.status?"active":"inactive"}}}catch(r){return{ok:!1,error:r.message}}}async function t(e,r){try{const t={nome:r.name,email:r.email,role:r.role,status:"active"===r.status?"ativo":"inativo"};r.password&&(t.senha=r.password);const s=await a(`/api/auth/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),i=s?.data?.user||s?.user||s?.data;if(!i)throw new Error("Resposta inválida do servidor");return{ok:!0,data:{id:String(i.id),name:i.name||i.nome,email:i.email,role:i.role,status:"ativo"===i.status?"active":"inactive"}}}catch(t){return{ok:!1,error:t.message}}}async function s(e){try{const r=await a(`/api/auth/users/${e}/toggle-status`,{method:"PATCH"}),t=r?.data?.user||r?.user||r?.data;if(!t)throw new Error("Resposta inválida do servidor");return{ok:!0,data:{id:String(t.id),name:t.name||t.nome,email:t.email,role:t.role,status:"ativo"===t.status?"active":"inactive"}}}catch(r){return{ok:!1,error:r.message}}}async function i(e){try{const r=await a("/api/auth/password-reset/request",{method:"POST",body:JSON.stringify({email:e})});return{ok:!0,resetLink:r?.reset_link||null}}catch(r){return{ok:!1,error:r.message}}}async function o({token:e,newPassword:r}){try{const t=await a("/api/auth/password-reset/confirm",{method:"POST",body:JSON.stringify({token:e,password:r})});return{ok:!0,message:t?.message||"Senha redefinida com sucesso"}}catch(t){return{ok:!1,error:t.message}}}export{r as a,o as c,e as g,i as r,s as t,t as u};
