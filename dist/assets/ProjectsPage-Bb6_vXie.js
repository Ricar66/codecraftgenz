import{j as e}from"./index-BNwvcLYh.js";import{r as s}from"./router-Bh7m2j_b.js";import{N as t}from"./Navbar-Bm4WAk2C.js";import{g as r}from"./projectsAPI-gL85jKDK.js";import{g as a}from"./performanceMonitor-D73jy10V.js";import{s as n}from"./urlSanitize-kq56XB4o.js";import"./dataCache-D0LcSMWP.js";const l="_page_u6l6k_9",c="_hero_u6l6k_77",o="_heroContent_u6l6k_97",i="_heroTitle_u6l6k_107",u="_heroSubtitle_u6l6k_149",d="_filtersSection_u6l6k_169",m="_filtersContainer_u6l6k_185",h="_filterPill_u6l6k_211",_="_filterPillActive_u6l6k_257",p="_pillCount_u6l6k_299",g="_projectsSection_u6l6k_319",j="_projectsGrid_u6l6k_335",f="_projectCard_u6l6k_349",x="_cardImageContainer_u6l6k_431",k="_cardImage_u6l6k_431",N="_cardImageOverlay_u6l6k_467",v="_cardStatus_u6l6k_493",b="_statusActive_u6l6k_519",y="_statusOngoing_u6l6k_531",C="_statusCompleted_u6l6k_543",w="_cardContent_u6l6k_557",M="_cardTitle_u6l6k_565",P="_cardDescription_u6l6k_581",S="_techBadges_u6l6k_605",T="_techBadge_u6l6k_605",E="_progressContainer_u6l6k_649",I="_progressLabel_u6l6k_657",A="_progressBar_u6l6k_673",R="_progressFill_u6l6k_687",L="_pagination_u6l6k_705",z="_pageBtn_u6l6k_721",F="_pageBtnActive_u6l6k_783",$="_pageInfo_u6l6k_797",B="_loadingContainer_u6l6k_813",O="_spinner_u6l6k_831",q="_loadingText_u6l6k_857",D="_emptyState_u6l6k_869",V="_emptyIcon_u6l6k_879",G="_emptyTitle_u6l6k_891",U="_emptyText_u6l6k_903",W="_statsBar_u6l6k_915",H="_statItem_u6l6k_937",J="_statValue_u6l6k_945",K="_statLabel_u6l6k_965",Q=[{id:"all",label:"Todos",icon:"üåü"},{id:"ongoing",label:"Em Andamento",icon:"‚ö°"},{id:"finalizado",label:"Finalizados",icon:"‚úÖ"},{id:"rascunho",label:"Rascunhos",icon:"üìù"}],X=({project:s})=>{const t=(s.status||"").toLowerCase(),r=s.progresso??s.progress??0,a=s.titulo||s.title||s.nome||"Projeto",l=s.descricao||s.description||"",c=s.thumb_url||s.thumbUrl||null,o=(e=>{const s=(e.descricao||e.description||"").toLowerCase();return s.includes("design")||s.includes("ui")||s.includes("ux")?"design":s.includes("neg√≥cio")||s.includes("business")||s.includes("gest√£o")?"business":"tech"})(s),i=(e=>{const s=e.tecnologias||e.tags||[];if(Array.isArray(s)&&s.length>0)return s.slice(0,3);const t=[],r=(e.descricao||e.description||"").toLowerCase(),a=(e.nome||e.titulo||e.title||"").toLowerCase();return(r.includes("react")||a.includes("react"))&&t.push("React"),(r.includes("node")||a.includes("node"))&&t.push("Node.js"),(r.includes("python")||a.includes("python"))&&t.push("Python"),(r.includes("typescript")||r.includes("ts"))&&t.push("TypeScript"),(r.includes(".net")||r.includes("c#")||r.includes("csharp"))&&t.push(".NET"),(r.includes("api")||r.includes("backend"))&&t.push("API"),(r.includes("mobile")||r.includes("app"))&&t.push("Mobile"),(r.includes("ia")||r.includes("ai")||r.includes("intelig√™ncia"))&&t.push("AI"),(r.includes("windows")||r.includes("desktop"))&&t.push("Desktop"),0===t.length&&t.push("Full-Stack"),t.slice(0,3)})(s);return e.jsxs("article",{className:f,"data-category":o,children:[e.jsxs("div",{className:x,children:[c?e.jsx("img",{src:n(c),alt:a,className:k,loading:"lazy",onError:e=>{e.currentTarget.style.display="none"}}):e.jsx("div",{className:k,style:{background:"linear-gradient(135deg, rgba(0, 228, 242, 0.2) 0%, rgba(209, 43, 242, 0.2) 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"3rem",color:"rgba(255,255,255,0.3)"},children:"üöÄ"}),e.jsx("div",{className:N}),e.jsx("span",{className:`${v} ${t.includes("finalizado")||t.includes("completed")?C:t.includes("ongoing")||t.includes("andamento")?y:b}`,children:t.includes("finalizado")||t.includes("completed")?"Conclu√≠do":t.includes("ongoing")||t.includes("andamento")?"Em Andamento":t.includes("rascunho")||t.includes("draft")?"Rascunho":"Ativo"})]}),e.jsxs("div",{className:w,children:[e.jsx("h3",{className:M,children:a}),e.jsx("p",{className:P,children:l||"Projeto em desenvolvimento na CodeCraft."}),e.jsx("div",{className:S,children:i.map((s,t)=>e.jsx("span",{className:T,children:s},t))}),e.jsxs("div",{className:E,children:[e.jsxs("div",{className:I,children:[e.jsx("span",{children:"Progresso"}),e.jsxs("span",{children:[r,"%"]})]}),e.jsx("div",{className:A,children:e.jsx("div",{className:R,style:{width:`${r}%`}})})]})]})]})},Y=()=>{const[n,f]=s.useState("all"),[x,k]=s.useState(1),{projects:N,loading:v,stats:b}=((e={})=>{const{autoFetch:t=!0,filters:n={},refetchInterval:l=3e4,timeout:c=1e4,maxRetries:o=3}=e,[i,u]=s.useState([]),[d,m]=s.useState(!1),[h,_]=s.useState(null),[p,g]=s.useState(null),[j,f]=s.useState(!1),[x,k]=s.useState(0),N=s.useRef(null),v=s.useRef(null),b=s.useRef(!0),y=s.useRef(n),C=s.useRef(d),w=s.useRef(x),M=s.useRef(e);s.useEffect(()=>{y.current=n},[n]),s.useEffect(()=>{C.current=d},[d]),s.useEffect(()=>{w.current=x},[x]),s.useEffect(()=>{M.current=e},[e]);const P=s.useCallback(async(e={})=>{const s=`fetch-projects-${Date.now()}`;if(a.startMeasure(s,{options:{...M.current,...e},retryCount:w.current}),!b.current)return[];if(w.current>=o)return _({message:`Falha ao carregar projetos ap√≥s ${o} tentativas. Verifique sua conex√£o.`,status:0,type:"max_retries",canRetry:!1}),m(!1),[];if(C.current)return[];N.current&&N.current.abort(),N.current=new AbortController;const t=setTimeout(()=>{N.current&&N.current.abort()},c);try{m(!0),_(null);const n={filters:{...y.current,...e.filters},signal:N.current.signal,...e},l=await r({...n,useCache:!0,publicOnly:M.current.publicOnly??!M.current.useAdminStore});return clearTimeout(t),b.current?(u(l.data||[]),f(0===(l.data||[]).length),g(new Date),m(!1),k(0),a.endMeasure(s,{success:!0,projectCount:l.data?.length||0,source:l.meta?.source,cached:l.meta?.cached}),l.data||[]):l.data||[]}catch(n){return clearTimeout(t),b.current?("AbortError"===n.name?(w.current,k(e=>e+1),_({message:"Timeout: A requisi√ß√£o demorou muito para responder",status:408,type:"timeout",canRetry:w.current<o-1,retryIn:Math.min(2e3*Math.pow(2,w.current),1e4)})):n.status>=500?(k(e=>e+1),_({message:"Erro interno do servidor. Tente novamente em alguns instantes.",status:n.status,type:"server_error",canRetry:w.current<o-1,retryIn:Math.min(3e3*Math.pow(2,w.current),15e3)})):(k(e=>e+1),_({message:n.message||"Erro desconhecido ao carregar projetos",status:n.status||0,type:"unknown",canRetry:w.current<o-1,retryIn:Math.min(1e3*Math.pow(2,w.current),5e3)})),a.endMeasure(s,{success:!1,error:n.message,retryCount:w.current}),m(!1),[]):[]}finally{clearTimeout(t),b.current&&m(!1)}},[c,o]),S=s.useCallback(async(e=1e3)=>new Promise(s=>{setTimeout(async()=>{const e=await P();s(e)},e)}),[P]),T=s.useCallback(async(e={})=>(_(null),k(0),P(e)),[P]),E=s.useCallback(()=>{_(null),k(0)},[]),I=s.useCallback(e=>{u(s=>[e,...s]),f(!1)},[]),A=s.useCallback((e,s)=>{u(t=>t.map(t=>t.id===e?{...t,...s}:t))},[]),R=s.useCallback(e=>{u(s=>{const t=s.filter(s=>s.id!==e);return f(0===t.length),t})},[]);s.useEffect(()=>(t&&b.current&&P().then(()=>{}).catch(()=>{}),l&&l>0&&b.current&&(v.current=setInterval(()=>{b.current&&P()},l)),()=>{v.current&&(clearInterval(v.current),v.current=null)}),[t,l,P]),s.useEffect(()=>()=>{b.current=!1,N.current&&N.current.abort(),v.current&&clearInterval(v.current)},[]);const L=d&&0===i.length&&!h,z=d&&i.length>0,F=null!==h,$=i.length>0,B={total:i.length,inProgress:i.filter(e=>{const s=String(e.status||"").toLowerCase();return"in_progress"===s||"active"===s||s.includes("em andamento")}).length,completed:i.filter(e=>{const s=String(e.status||"").toLowerCase();return"completed"===s||"conclu√≠do"===s||"concluido"===s}).length,averageProgress:i.length>0?Math.round(i.reduce((e,s)=>{const t=s.progress??s.progresso??0,r=Number(t);return e+(Number.isFinite(r)?Math.max(0,Math.min(100,r)):0)},0)/i.length):0};return{projects:i,stats:B,lastFetch:p,loading:d,error:h,isEmpty:j,retryCount:x,isInitialLoading:L,isRefetching:z,hasError:F,hasProjects:$,fetchProjects:P,refetch:T,retryWithBackoff:S,clearError:E,addProject:I,updateProject:A,removeProject:R}})({autoFetch:!0,refetchInterval:6e4,timeout:8e3,maxRetries:2,useAdminStore:!1,publicOnly:!1}),y=s.useMemo(()=>{if(!N||0===N.length)return[];let e=N.filter(e=>{const s=(e.status||"").toLowerCase();return!s.includes("rascunho")&&!s.includes("draft")||"rascunho"===n});return"all"!==n&&"rascunho"!==n&&(e=e.filter(e=>{const s=(e.status||"").toLowerCase();return"ongoing"===n?s.includes("ongoing")||s.includes("andamento")||s.includes("ativo"):"finalizado"!==n||(s.includes("finalizado")||s.includes("completed")||s.includes("conclu√≠do"))})),e},[N,n]);s.useEffect(()=>{k(1)},[n]);const C=Math.ceil(y.length/6),w=y.slice(6*(x-1),6*x),M=s.useMemo(()=>N?{all:N.length,ongoing:N.filter(e=>{const s=(e.status||"").toLowerCase();return s.includes("ongoing")||s.includes("andamento")||s.includes("ativo")}).length,finalizado:N.filter(e=>{const s=(e.status||"").toLowerCase();return s.includes("finalizado")||s.includes("completed")}).length,rascunho:N.filter(e=>{const s=(e.status||"").toLowerCase();return s.includes("rascunho")||s.includes("draft")}).length}:{},[N]);return e.jsxs("div",{className:l,children:[e.jsx(t,{}),e.jsx("section",{className:c,children:e.jsxs("div",{className:o,children:[e.jsx("h1",{className:i,children:"Nossos Projetos"}),e.jsx("p",{className:u,children:"Explore os projetos que estamos desenvolvendo. Cada um representa nossa dedica√ß√£o em criar solu√ß√µes inovadoras e de alta qualidade."})]})}),e.jsx("section",{className:d,children:e.jsx("div",{className:m,children:Q.map(s=>e.jsxs("button",{className:`${h} ${n===s.id?_:""}`,onClick:()=>f(s.id),children:[e.jsx("span",{children:s.icon}),e.jsx("span",{children:s.label}),M[s.id]>0&&e.jsx("span",{className:p,children:M[s.id]})]},s.id))})}),b&&b.total>0&&e.jsx("section",{className:d,children:e.jsxs("div",{className:W,children:[e.jsxs("div",{className:H,children:[e.jsx("span",{className:J,children:b.total}),e.jsx("span",{className:K,children:"Total"})]}),e.jsxs("div",{className:H,children:[e.jsx("span",{className:J,children:b.inProgress}),e.jsx("span",{className:K,children:"Em Andamento"})]}),e.jsxs("div",{className:H,children:[e.jsxs("span",{className:J,children:[b.averageProgress,"%"]}),e.jsx("span",{className:K,children:"Progresso M√©dio"})]})]})}),e.jsx("section",{className:g,children:v&&0===N.length?e.jsxs("div",{className:B,children:[e.jsx("div",{className:O}),e.jsx("span",{className:q,children:"Carregando projetos..."})]}):0===y.length?e.jsxs("div",{className:D,children:[e.jsx("div",{className:V,children:"üì¶"}),e.jsx("h3",{className:G,children:"Nenhum projeto encontrado"}),e.jsx("p",{className:U,children:"all"!==n?"Tente outro filtro ou volte em breve para novidades.":"Volte em breve para conferir nossos projetos."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:j,children:w.map(s=>e.jsx(X,{project:s},s.id))}),C>1&&e.jsxs("div",{className:L,children:[e.jsx("button",{onClick:()=>{k(e=>Math.max(1,e-1)),window.scrollTo({top:0,behavior:"smooth"})},disabled:1===x,className:z,"aria-label":"P√°gina anterior",children:"‚Äπ"}),Array.from({length:C},(e,s)=>s+1).map(s=>e.jsx("button",{onClick:()=>{k(s),window.scrollTo({top:0,behavior:"smooth"})},className:`${z} ${x===s?F:""}`,children:s},s)),e.jsx("button",{onClick:()=>{k(e=>Math.min(C,e+1)),window.scrollTo({top:0,behavior:"smooth"})},disabled:x===C,className:z,"aria-label":"Pr√≥xima p√°gina",children:"‚Ä∫"}),e.jsxs("span",{className:$,children:[6*(x-1)+1,"‚Äì",Math.min(6*x,y.length)," de ",y.length]})]})]})})]})};export{Y as default};
