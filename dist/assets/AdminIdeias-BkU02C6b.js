import{j as a,ag as e,$ as s,ae as i,ah as t,ai as n,aj as r}from"./index-BHfn_mjD.js";import{r as o}from"./router-5U3rcizL.js";import{A as c,S as d}from"./StatusBadge-DaKUplcy.js";const l="_page_1bnvy_7",m="_header_1bnvy_17",_="_headerTitle_1bnvy_35",v="_headerIcon_1bnvy_47",h="_newIdeaBtn_1bnvy_89",x="_formCard_1bnvy_131",u="_formTitle_1bnvy_143",j="_form_1bnvy_131",y="_formGroup_1bnvy_169",b="_input_1bnvy_193",p="_textarea_1bnvy_195",N="_formActions_1bnvy_243",g="_saveBtn_1bnvy_255",S="_cancelBtn_1bnvy_257",f="_ideiasList_1bnvy_319",C="_emptyCard_1bnvy_331",D="_emptyState_1bnvy_339",w="_emptyIcon_1bnvy_349",I="_ideiaCard_1bnvy_365",A="_ideiaHeader_1bnvy_385",T="_ideiaTitulo_1bnvy_393",B="_ideiaMeta_1bnvy_407",E="_ideiaData_1bnvy_421",k="_ideiaContent_1bnvy_431",F="_ideiaActions_1bnvy_457",P="_voteBtn_1bnvy_467",L="_commentBtn_1bnvy_469",M="_active_1bnvy_529",O="_comentarioSection_1bnvy_539",Z="_comentarioForm_1bnvy_551",$="_comentarioInput_1bnvy_563",q="_addCommentBtn_1bnvy_597",z="_comentariosList_1bnvy_627",G="_comentarioItem_1bnvy_653",H="_comentarioHeader_1bnvy_667",R="_comentarioData_1bnvy_691",V="_loadingState_1bnvy_717",Y="_spinner_1bnvy_737",J="_errorState_1bnvy_763",K="_retryBtn_1bnvy_793",Q={getAll:async()=>[{id:1,titulo:"Sistema de Gamificação para Aprendizado",descricao:"Desenvolver um sistema de gamificação com badges, níveis e recompensas para engajar os usuários no aprendizado.",autor:"Admin",data_criacao:"2024-01-15T10:30:00Z",votos:12,comentarios:[{id:1,autor:"Mentor 1",texto:"Excelente ideia! Podemos integrar com o sistema atual de pontos.",data:"2024-01-15T11:00:00Z"}]},{id:2,titulo:"Plataforma de Mentoria em Tempo Real",descricao:"Criar uma plataforma onde mentores possam oferecer sessões de mentoria em tempo real com agendamento integrado.",autor:"Admin",data_criacao:"2024-01-14T14:20:00Z",votos:8,comentarios:[]}],create:async a=>({...a,id:Date.now(),data_criacao:(new Date).toISOString(),votos:0,comentarios:[]}),vote:async a=>({success:!0}),addComment:async(a,e)=>({success:!0})};function U(){const[U,W]=o.useState([]),[X,aa]=o.useState(!0),[ea,sa]=o.useState(""),[ia,ta]=o.useState(!1),[na,ra]=o.useState({titulo:"",descricao:""}),[oa,ca]=o.useState(null),[da,la]=o.useState(""),ma=async()=>{try{aa(!0),sa("");const a=await Q.getAll();W(a)}catch(a){sa("Erro ao carregar ideias: "+a.message)}finally{aa(!1)}};o.useEffect(()=>{ma()},[]);const _a=a=>new Date(a).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return X?a.jsx("div",{className:l,children:a.jsxs("div",{className:V,children:[a.jsx("div",{className:Y}),a.jsx("p",{children:"Carregando ideias..."})]})}):ea?a.jsx("div",{className:l,children:a.jsx(c,{variant:"outlined",children:a.jsxs("div",{className:J,children:[a.jsx("h3",{children:"Erro ao carregar ideias"}),a.jsx("p",{children:ea}),a.jsx("button",{onClick:ma,className:K,children:"Tentar novamente"})]})})}):a.jsxs("div",{className:l,children:[a.jsxs("header",{className:m,children:[a.jsxs("div",{className:_,children:[a.jsx(e,{className:v}),a.jsxs("div",{children:[a.jsx("h1",{children:"Ideias de Projeto"}),a.jsx("p",{children:"Compartilhe e colabore em ideias para novos projetos"})]})]}),a.jsx("button",{className:h,onClick:()=>ta(!ia),children:ia?a.jsxs(a.Fragment,{children:[a.jsx(s,{})," Cancelar"]}):a.jsxs(a.Fragment,{children:[a.jsx(i,{})," Nova Ideia"]})})]}),ia&&a.jsxs(c,{variant:"elevated",className:x,children:[a.jsx("h3",{className:u,children:"Adicionar Nova Ideia"}),a.jsxs("form",{onSubmit:async a=>{if(a.preventDefault(),na.titulo.trim()&&na.descricao.trim())try{const a=await Q.create(na);W([a,...U]),ra({titulo:"",descricao:""}),ta(!1),alert("Ideia criada com sucesso!")}catch(e){alert("Erro ao criar ideia: "+e.message)}else alert("Preencha todos os campos obrigatórios")},className:j,children:[a.jsxs("div",{className:y,children:[a.jsx("label",{htmlFor:"titulo",children:"Título *"}),a.jsx("input",{id:"titulo",type:"text",placeholder:"Título da ideia",value:na.titulo,onChange:a=>ra({...na,titulo:a.target.value}),className:b,required:!0})]}),a.jsxs("div",{className:y,children:[a.jsx("label",{htmlFor:"descricao",children:"Descrição Detalhada *"}),a.jsx("textarea",{id:"descricao",placeholder:"Descreva sua ideia em detalhes...",value:na.descricao,onChange:a=>ra({...na,descricao:a.target.value}),className:p,rows:"4",required:!0})]}),a.jsxs("div",{className:N,children:[a.jsxs("button",{type:"submit",className:g,children:[a.jsx(t,{})," Salvar Ideia"]}),a.jsxs("button",{type:"button",className:S,onClick:()=>ta(!1),children:[a.jsx(s,{})," Cancelar"]})]})]})]}),a.jsx("div",{className:f,children:0===U.length?a.jsx(c,{variant:"outlined",className:C,children:a.jsxs("div",{className:D,children:[a.jsx(e,{className:w}),a.jsx("p",{children:"Nenhuma ideia cadastrada ainda."}),a.jsx("p",{children:"Seja o primeiro a compartilhar uma ideia!"})]})}):U.map(e=>a.jsxs(c,{variant:"elevated",className:I,children:[a.jsxs("div",{className:A,children:[a.jsx("h3",{className:T,children:e.titulo}),a.jsxs("div",{className:B,children:[a.jsxs(d,{variant:"info",children:["por ",e.autor]}),a.jsx("span",{className:E,children:_a(e.data_criacao)})]})]}),a.jsx("div",{className:k,children:a.jsx("p",{children:e.descricao})}),a.jsxs("div",{className:F,children:[a.jsxs("button",{className:P,onClick:()=>(async a=>{try{await Q.vote(a),W(U.map(e=>e.id===a?{...e,votos:e.votos+1}:e))}catch(e){alert("Erro ao votar: "+e.message)}})(e.id),title:"Votar nesta ideia",children:[a.jsx(n,{})," ",e.votos]}),a.jsxs("button",{className:`${L} ${oa===e.id?M:""}`,onClick:()=>ca(oa===e.id?null:e.id),children:[a.jsx(r,{})," ",e.comentarios.length]})]}),oa===e.id&&a.jsxs("div",{className:O,children:[a.jsxs("div",{className:Z,children:[a.jsx("textarea",{placeholder:"Deixe seu comentário...",value:da,onChange:a=>la(a.target.value),className:$,rows:"2"}),a.jsxs("button",{className:q,onClick:()=>(async a=>{if(da.trim())try{await Q.addComment(a,{autor:"Admin",texto:da,data:(new Date).toISOString()}),W(U.map(e=>e.id===a?{...e,comentarios:[...e.comentarios,{id:Date.now(),autor:"Admin",texto:da,data:(new Date).toISOString()}]}:e)),la(""),ca(null)}catch(e){alert("Erro ao adicionar comentário: "+e.message)}else alert("Digite um comentário")})(e.id),children:[a.jsx(i,{})," Adicionar"]})]}),e.comentarios.length>0&&a.jsxs("div",{className:z,children:[a.jsx("h4",{children:"Comentários:"}),e.comentarios.map(e=>a.jsxs("div",{className:G,children:[a.jsxs("div",{className:H,children:[a.jsx("strong",{children:e.autor}),a.jsx("span",{className:R,children:_a(e.data)})]}),a.jsx("p",{children:e.texto})]},e.id))]})]})]},e.id))})]})}export{U as default};
