import{j as e,g as s,h as a,i as r,k as l,l as t}from"./index-sK2loqLz.js";import{r as o,a as i,L as n,R as c}from"./router-5U3rcizL.js";import{A as d}from"./AppCard-C-azqI-J.js";import{d as m}from"./index-BvcXLRto.js";import{g as h,a as u}from"./appModel-AsaTK777.js";import{N as _}from"./Navbar-B2cPrdsN.js";import{g as p}from"./appsAPI-CT4lZjxR.js";import{a as x}from"./dataCache-D0LcSMWP.js";import{s as j}from"./urlSanitize-Bu_u8ZdG.js";const g={overlay:"_overlay_kq67o_7",fadeIn:"_fadeIn_kq67o_1",modal:"_modal_kq67o_33",slideIn:"_slideIn_kq67o_1",sm:"_sm_kq67o_59",md:"_md_kq67o_64",lg:"_lg_kq67o_69",xl:"_xl_kq67o_74",full:"_full_kq67o_79",header:"_header_kq67o_89",title:"_title_kq67o_98",closeButton:"_closeButton_kq67o_109",body:"_body_kq67o_141",footer:"_footer_kq67o_169",slideUp:"_slideUp_kq67o_1"};function f({isOpen:s,onClose:a,size:r="md",title:l,showCloseButton:t=!0,closeOnOverlayClick:n=!0,closeOnEsc:c=!0,footer:d,children:h,className:u,"aria-labelledby":_,"aria-describedby":p}){const x=o.useRef(null),j=o.useRef(null),f=_||`modal-title-${Math.random().toString(36).slice(2,9)}`,v=o.useCallback(e=>{c&&"Escape"===e.key&&a()},[c,a]),N=o.useCallback(e=>{if(!x.current)return;const s=x.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),a=s[0],r=s[s.length-1];"Tab"===e.key&&(e.shiftKey&&document.activeElement===a?(e.preventDefault(),r?.focus()):e.shiftKey||document.activeElement!==r||(e.preventDefault(),a?.focus()))},[]);o.useEffect(()=>(s?(j.current=document.activeElement,document.body.style.overflow="hidden",setTimeout(()=>{x.current?.focus()},0),document.addEventListener("keydown",v),document.addEventListener("keydown",N)):(document.body.style.overflow="",j.current?.focus()),()=>{document.body.style.overflow="",document.removeEventListener("keydown",v),document.removeEventListener("keydown",N)}),[s,v,N]);if(!s)return null;const b=[g.modal,g[r],u].filter(Boolean).join(" "),y=e.jsx("div",{className:g.overlay,onClick:e=>{n&&e.target===e.currentTarget&&a()},role:"presentation",children:e.jsxs("div",{ref:x,className:b,role:"dialog","aria-modal":"true","aria-labelledby":l?f:_,"aria-describedby":p,tabIndex:-1,children:[(l||t)&&e.jsxs("div",{className:g.header,children:[l&&e.jsx("h2",{id:f,className:g.title,children:l}),t&&e.jsx("button",{type:"button",className:g.closeButton,onClick:a,"aria-label":"Fechar modal",children:e.jsx(m,{})})]}),e.jsx("div",{className:g.body,children:h}),d&&e.jsx("div",{className:g.footer,children:d})]})});return i.createPortal(y,document.body)}const v="_hero_8w8ok_1",N="_heroImage_8w8ok_19",b="_heroPlaceholder_8w8ok_31",y="_heroOverlay_8w8ok_57",w="_heroTitle_8w8ok_77",k="_heroBadge_8w8ok_95",z="_section_8w8ok_123",C="_sectionTitle_8w8ok_131",S="_description_8w8ok_149",A="_tags_8w8ok_163",B="_tag_8w8ok_163",L="_platforms_8w8ok_199",T="_platform_8w8ok_199",q="_infoGrid_8w8ok_237",$="_infoItem_8w8ok_249",D="_infoLabel_8w8ok_269",I="_infoValue_8w8ok_283",E="_screenshots_8w8ok_295",P="_screenshot_8w8ok_295",M="_ctaBar_8w8ok_329",O="_ctaPrice_8w8ok_353",F="_ctaPriceLabel_8w8ok_363",R="_ctaPriceValue_8w8ok_373",U="_ctaButton_8w8ok_385",W={windows:{icon:e.jsx(l,{}),label:"Windows"},macos:{icon:e.jsx(r,{}),label:"macOS"},linux:{icon:e.jsx(a,{}),label:"Linux"}};function H({app:a,onClose:r}){if(!a)return null;const l=h(a),t=u(a),o=t>0?`R$ ${t.toLocaleString("pt-BR",{minimumFractionDigits:2})}`:"Gratuito",i=(e=>{if(!e)return[];if(Array.isArray(e))return e;if("string"==typeof e)try{return JSON.parse(e)}catch{return e.split(",").map(e=>e.trim()).filter(Boolean)}return[]})(a.platforms),c=(e=>{if(!e)return[];if(Array.isArray(e))return e;if("string"==typeof e)try{return JSON.parse(e)}catch{return e.split(",").map(e=>e.trim()).filter(Boolean)}return[]})(a.tags),d=(e=>{if(!e)return[];if(Array.isArray(e))return e;if("string"==typeof e)try{return JSON.parse(e)}catch{return[]}return[]})(a.screenshots),m=a.description||a.shortDescription||a.mainFeature||"";return e.jsxs(f,{isOpen:!0,onClose:r,size:"xl",title:null,showCloseButton:!0,children:[e.jsxs("div",{className:v,children:[l?e.jsx("img",{src:l,alt:a.name,className:N,loading:"eager"}):e.jsx("div",{className:b,children:a.name?.slice(0,3).toUpperCase()||"APP"}),e.jsxs("div",{className:y,children:[e.jsx("h2",{className:w,children:a.name}),a.category&&e.jsx("span",{className:k,children:a.category})]})]}),m&&e.jsxs("div",{className:z,children:[e.jsx("h3",{className:C,children:"Sobre o Aplicativo"}),e.jsx("p",{className:S,children:m})]}),c.length>0&&e.jsxs("div",{className:z,children:[e.jsx("h3",{className:C,children:"Recursos"}),e.jsx("div",{className:A,children:c.map((s,a)=>e.jsx("span",{className:B,children:s},a))})]}),i.length>0&&e.jsxs("div",{className:z,children:[e.jsx("h3",{className:C,children:"Plataformas"}),e.jsx("div",{className:L,children:i.map(s=>{const a=String(s).toLowerCase(),r=W[a];return e.jsxs("span",{className:T,children:[r?.icon," ",r?.label||s]},a)})})]}),e.jsxs("div",{className:z,children:[e.jsx("h3",{className:C,children:"Informacoes"}),e.jsxs("div",{className:q,children:[a.version&&e.jsxs("div",{className:$,children:[e.jsx("span",{className:D,children:"Versao"}),e.jsxs("span",{className:I,children:["v",a.version]})]}),a.category&&e.jsxs("div",{className:$,children:[e.jsx("span",{className:D,children:"Categoria"}),e.jsx("span",{className:I,children:a.category})]}),a.size&&e.jsxs("div",{className:$,children:[e.jsx("span",{className:D,children:"Tamanho"}),e.jsx("span",{className:I,children:a.size})]}),e.jsxs("div",{className:$,children:[e.jsx("span",{className:D,children:"Preco"}),e.jsx("span",{className:I,children:o})]})]})]}),d.length>0&&e.jsxs("div",{className:z,children:[e.jsx("h3",{className:C,children:"Screenshots"}),e.jsx("div",{className:E,children:d.map((s,r)=>e.jsx("img",{src:s,alt:`Screenshot ${r+1} de ${a.name}`,className:P,loading:"lazy"},r))})]}),e.jsxs("div",{className:M,children:[e.jsxs("div",{className:O,children:[e.jsx("span",{className:F,children:"A partir de"}),e.jsx("span",{className:R,children:o})]}),e.jsxs(n,{to:`/apps/${a.id}/compra`,className:U,onClick:r,children:[e.jsx(s,{})," Comprar Agora"]})]})]})}const G="_srOnly_1mlzo_5",V="_appHubPage_1mlzo_18",J="_heroSection_1mlzo_52",K="_heroContent_1mlzo_61",Q="_heroTitle_1mlzo_66",X="_heroSubtitle_1mlzo_87",Y="_searchContainer_1mlzo_97",Z="_searchInput_1mlzo_103",ee="_searchIcon_1mlzo_127",se="_hubBanner_1mlzo_207",ae="_hubBannerContent_1mlzo_215",re="_hubBannerIcon_1mlzo_234",le="_hubBannerText_1mlzo_238",te="_hubBannerTag_1mlzo_253",oe="_hubBannerButton_1mlzo_271",ie="_filterSection_1mlzo_314",ne="_filterContainer_1mlzo_320",ce="_filterButtons_1mlzo_339",de="_filterButton_1mlzo_339",me="_active_1mlzo_365",he="_sortControls_1mlzo_374",ue="_pageInput_1mlzo_406",_e="_highlightsSection_1mlzo_424",pe="_highlightsHeader_1mlzo_432",xe="_highlightsViewport_1mlzo_455",je="_highlightsTrack_1mlzo_462",ge="_highlightCard_1mlzo_489",fe="_highlightMedia_1mlzo_509",ve="_highlightOverlay_1mlzo_517",Ne="_highlightInfo_1mlzo_531",be="_highlightTitle_1mlzo_537",ye="_highlightDesc_1mlzo_546",we="_highlightActions_1mlzo_554",ke="_ctaPrimary_1mlzo_562",ze="_ctaSecondary_1mlzo_563",Ce="_navButton_1mlzo_602",Se="_prev_1mlzo_632",Ae="_next_1mlzo_636",Be="_highlightsDots_1mlzo_641",Le="_dot_1mlzo_648",Te="_appsSection_1mlzo_671",qe="_container_1mlzo_678",$e="_appsGrid_1mlzo_689",De="_cardWrap_1mlzo_697",Ie="_loadingContainer_1mlzo_737",Ee="_errorContainer_1mlzo_738",Pe="_noResults_1mlzo_739",Me="_gridPagination_1mlzo_766",Oe="_spinner_1mlzo_780",Fe="_retryButton_1mlzo_793",Re=()=>{const[s,a]=o.useState([]),[r,i]=o.useState(!0),[m,u]=o.useState(null),[g,f]=o.useState("all"),[v,N]=o.useState(""),[b,y]=o.useState(1),[w,k]=o.useState(12),[z,C]=o.useState("name"),[S,A]=o.useState("asc"),[B,L]=o.useState(!1),[T,q]=o.useState(!1),[$,D]=o.useState(null),[I,E]=o.useState(1);o.useEffect(()=>{P()},[b,w,z,S]);const P=async()=>{try{i(!0);const e=x.generateKey("publicApps",{page:b,pageSize:w,sortBy:z,sortOrder:S}),s=x.get(e);if(s)return a(s),L(!0),q(!0),void setTimeout(()=>q(!1),2e3);const r=await p({page:b,pageSize:w,sortBy:z,sortOrder:S}),l=Array.isArray(r?.data)?r.data:Array.isArray(r)?r:[];a(l),x.set(e,l),L(!1),q(!1)}catch(e){u("Erro ao carregar aplicativos")}finally{i(!1)}},M=["all",...new Set(s.map(e=>e.category).filter(Boolean))],O=o.useMemo(()=>{let e=s.filter(e=>"codecraft hub"!==String(e.name||"").toLowerCase());if(v){const s=v.toLowerCase();e=e.filter(e=>String(e.name||"").toLowerCase().includes(s)||String(e.description||"").toLowerCase().includes(s)||String(e.category||"").toLowerCase().includes(s))}return"all"!==g&&(e=e.filter(e=>(e.category||"outros")===g)),e},[s,v,g]);o.useEffect(()=>{E(1)},[g,v]);const F=Math.ceil(O.length/6),R=O.slice(6*(I-1),6*I),U=c.useMemo(()=>{const e=(Array.isArray(s)?s:[]).filter(e=>"codecraft hub"!==String(e.name||"").toLowerCase()),a=e=>{try{return e?new Date(e).getTime():0}catch{return 0}},r=e=>{const s=Number(e);return Number.isFinite(s)?s:0},l=e=>["available","ready","finalizado"].includes(String(e||"").toLowerCase());return[...e.filter(e=>e.isFeatured).sort((e,s)=>a(s.updatedAt)-a(e.updatedAt)||r(s.price)-r(e.price)||String(e.name||"").localeCompare(String(s.name||""))),...e.filter(e=>!e.isFeatured&&l(e.status)).sort((e,s)=>a(s.updatedAt)-a(e.updatedAt)||r(s.price)-r(e.price)||String(e.name||"").localeCompare(String(s.name||""))),...e.filter(e=>!e.isFeatured&&!l(e.status)).sort((e,s)=>a(s.updatedAt)-a(e.updatedAt)||r(s.price)-r(e.price)||String(e.name||"").localeCompare(String(s.name||"")))]},[s]),W=o.useRef(null),[Re,Ue]=o.useState(0),[We,He]=o.useState(!0),Ge=o.useRef(null),Ve=o.useRef(null),Je=e=>{const s=W.current?.children?.[e];s&&W.current&&(W.current.scrollTo({left:s.offsetLeft,behavior:"smooth"}),Ue(e))},Ke=()=>{const e=Re-1<0?Math.max(0,(U.length||1)-1):Re-1;Je(e),Xe()},Qe=()=>{const e=Re+1>=(U.length||1)?0:Re+1;Je(e),Xe()},Xe=()=>{He(!1),Ge.current&&clearTimeout(Ge.current),Ge.current=setTimeout(()=>He(!0),5e3)};return o.useEffect(()=>{if(We&&!((U?.length||0)<2))return Ve.current=setInterval(()=>{const e=Re+1>=U.length?0:Re+1;Je(e)},4e3),()=>{Ve.current&&(clearInterval(Ve.current),Ve.current=null)};Ve.current&&(clearInterval(Ve.current),Ve.current=null)},[We,Re,U]),r?e.jsxs("div",{className:V,children:[e.jsx(_,{}),e.jsxs("div",{className:Ie,children:[e.jsx("div",{className:Oe}),e.jsx("p",{children:"Carregando aplicativos..."})]})]}):m?e.jsxs("div",{className:V,children:[e.jsx(_,{}),e.jsxs("div",{className:Ee,children:[e.jsx("h2",{children:"Erro ao carregar aplicativos"}),e.jsx("p",{children:m}),e.jsx("button",{onClick:P,className:Fe,children:"Tentar Novamente"})]})]}):e.jsxs("div",{className:V,children:[e.jsx(_,{}),e.jsx("section",{className:J,"aria-label":"Apresentacao do Hub de Aplicativos",children:e.jsxs("div",{className:K,children:[e.jsxs("header",{children:[e.jsx("h1",{className:Q,children:"Hub de Aplicativos"}),e.jsx("p",{className:X,children:"Descubra e adquira os melhores aplicativos para impulsionar seu negÃ³cio"})]}),e.jsxs("div",{className:Y,role:"search",children:[e.jsx("label",{htmlFor:"app-search",className:G,children:"Buscar aplicativos"}),e.jsx("input",{type:"search",id:"app-search",placeholder:"Buscar aplicativos...",value:v,onChange:e=>{N(e.target.value),y(1)},className:Z}),e.jsx("div",{className:ee,"aria-hidden":"true",children:"ðŸ”"})]})]})}),e.jsx("section",{className:se,children:e.jsxs("div",{className:ae,children:[e.jsx("div",{className:re,children:e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"2",y:"2",width:"60",height:"60",rx:"14",fill:"url(#hub-bg)"}),e.jsx("path",{d:"M24 20L12 32L24 44",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.9"}),e.jsx("path",{d:"M40 20L52 32L40 44",stroke:"url(#hub-accent)",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"32",cy:"32",r:"4",fill:"white",opacity:"0.95"}),e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"hub-bg",x1:"0",y1:"0",x2:"64",y2:"64",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{offset:"0%",stopColor:"#D12BF2"}),e.jsx("stop",{offset:"100%",stopColor:"#9B1FD4"})]}),e.jsxs("linearGradient",{id:"hub-accent",x1:"0",y1:"0",x2:"64",y2:"64",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{offset:"0%",stopColor:"#00E4F2"}),e.jsx("stop",{offset:"100%",stopColor:"#00B4D8"})]})]})]})}),e.jsxs("div",{className:le,children:[e.jsxs("h3",{children:["CodeCraft Hub ",e.jsx("span",{className:te,children:"Gratuito"})]}),e.jsx("p",{children:"Baixe o launcher desktop e gerencie todos os seus apps em um sÃ³ lugar. Download, instalaÃ§Ã£o e atualizaÃ§Ãµes automÃ¡ticas."})]}),e.jsxs(n,{to:"/aplicativos/hub",className:oe,children:[e.jsx(t,{}),e.jsxs("span",{children:["Baixar para ",e.jsx(l,{style:{marginLeft:4}})," Windows"]})]})]})}),e.jsx("section",{className:ie,"aria-label":"Filtros e ordenacao",children:e.jsxs("div",{className:ne,children:[e.jsx("h3",{id:"category-filter-label",children:"Filtrar por Categoria"}),e.jsx("div",{className:ce,role:"group","aria-labelledby":"category-filter-label",children:M.map(s=>e.jsx("button",{onClick:()=>f(s),className:`${de} ${g===s?me:""}`,"aria-pressed":g===s,type:"button",children:"all"===s?"Todos":s},s))}),e.jsxs("div",{className:he,children:[e.jsxs("label",{children:["Ordenar por",e.jsxs("select",{value:z,onChange:e=>{y(1),C(e.target.value)},className:de,children:[e.jsx("option",{value:"name",children:"Nome"}),e.jsx("option",{value:"price",children:"PreÃ§o"}),e.jsx("option",{value:"updatedAt",children:"AtualizaÃ§Ã£o"})]})]}),e.jsxs("label",{children:["Ordem",e.jsxs("select",{value:S,onChange:e=>{y(1),A(e.target.value)},className:de,children:[e.jsx("option",{value:"asc",children:"Ascendente"}),e.jsx("option",{value:"desc",children:"Descendente"})]})]}),e.jsxs("label",{children:["PÃ¡gina",e.jsx("input",{type:"number",min:1,value:b,onChange:e=>y(Math.max(1,Number(e.target.value)||1)),className:ue})]}),e.jsxs("label",{children:["Itens por pÃ¡gina",e.jsxs("select",{value:w,onChange:e=>{y(1),k(Number(e.target.value))},className:de,children:[e.jsx("option",{value:12,children:"12"}),e.jsx("option",{value:24,children:"24"}),e.jsx("option",{value:48,children:"48"})]})]})]})]})}),U.length>0?e.jsxs("section",{className:_e,children:[e.jsxs("div",{className:pe,children:[e.jsx("h3",{children:"Destaques"}),e.jsx("p",{children:"Apps recomendados para vocÃª â€” populares e atualizados"})]}),e.jsxs("div",{className:xe,tabIndex:0,onKeyDown:e=>{if("ArrowLeft"===e.key)Ke(),Xe();else if("ArrowRight"===e.key){const e=Re+1>=U.length?0:Re+1;Je(e),Xe()}else if("PageUp"===e.key)Ke(),Xe();else if("PageDown"===e.key)Qe(),Xe();else if("Home"===e.key)Je(0),Xe();else if("End"===e.key){const e=Math.max(0,(U.length||1)-1);Je(e),Xe()}},onMouseEnter:()=>He(!1),onMouseLeave:()=>He(!0),onFocus:()=>He(!1),onBlur:()=>He(!0),"aria-roledescription":"carousel","aria-label":"Destaques",children:[e.jsx("div",{ref:W,className:je,onScroll:()=>{const e=W.current;if(!e)return;const s=e.scrollLeft+e.clientWidth/2,a=Array.from(e.children||[]);let r=0,l=1/0;a.forEach((e,a)=>{const t=e.offsetLeft+e.offsetWidth/2,o=Math.abs(t-s);o<l&&(l=o,r=a)}),Ue(r),Xe()},children:U.map((s,a)=>e.jsxs("div",{className:ge,children:[h(s)?e.jsx("img",{className:fe,src:h(s),alt:s.name?`Destaque: ${s.name}`:"Destaque do Hub",loading:"lazy",decoding:"async",draggable:"false",fetchpriority:0===a?"high":"low",sizes:"(max-width: 640px) 80vw, (max-width: 1024px) 50vw, 360px",srcSet:s.thumbnail&&s.image?j(`${s.thumbnail} 480w, ${s.image} 800w, ${s.image} 1200w`):s.image?j(`${s.image} 800w, ${s.image} 1200w`):void 0,onError:e=>{e.currentTarget.style.display="none"}}):e.jsx("div",{className:fe,style:{background:"linear-gradient(135deg, rgba(209,43,242,0.3), rgba(0,228,242,0.3))",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--texto-gelo)",fontSize:"2rem",fontWeight:700},children:s.name?.charAt(0)||"A"}),e.jsxs("div",{className:ve,children:[e.jsxs("div",{className:Ne,children:[e.jsx("h4",{className:be,children:s.name}),e.jsx("p",{className:ye,children:(s.description||s.mainFeature||"").slice(0,120)})]}),e.jsxs("div",{className:we,children:[e.jsx(n,{to:`/apps/${s.id}/compra`,className:ke,children:"Comprar Agora"}),e.jsx("button",{type:"button",onClick:()=>D(s),className:ze,children:"Ver Detalhes"})]})]})]},s.id))}),e.jsx("button",{type:"button",className:`${Ce} ${Se}`,onClick:Ke,"aria-label":"Anterior",children:"â€¹"}),e.jsx("button",{type:"button",className:`${Ce} ${Ae}`,onClick:Qe,"aria-label":"PrÃ³ximo",children:"â€º"}),e.jsxs("div",{className:G,role:"status","aria-live":"polite","aria-atomic":"true",children:["Destaque ",Re+1," de ",U.length,": ",U[Re]?.name||""]})]}),e.jsx("div",{className:Be,role:"tablist","aria-label":"NavegaÃ§Ã£o dos destaques",children:U.map((s,a)=>e.jsx("button",{type:"button",role:"tab",className:`${Le} ${a===Re?me:""}`,"aria-label":`Ir ao destaque ${a+1}`,"aria-selected":a===Re,onClick:()=>Je(a)},a))})]}):null,e.jsx("section",{className:Te,children:e.jsxs("div",{className:qe,children:[e.jsxs("div",{className:pe,children:[e.jsx("h3",{children:"Todos os Aplicativos"}),e.jsxs("p",{children:[O.length," aplicativo(s) disponÃ­vel(is)"]})]}),0===O.length?e.jsxs("div",{className:Pe,children:[e.jsx("h3",{children:"Nenhum aplicativo encontrado"}),e.jsx("p",{children:"Tente ajustar os filtros ou termos de busca"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:$e,children:R.map(s=>e.jsx("div",{className:De,children:e.jsx(d,{app:s,mode:"public",onAbout:D})},s.id))}),F>1&&e.jsxs("div",{className:Me,children:[e.jsx("button",{onClick:()=>{E(e=>Math.max(1,e-1)),window.scrollTo({top:0,behavior:"smooth"})},disabled:1===I,className:de,children:"â€¹ Anterior"}),Array.from({length:F},(e,s)=>s+1).map(s=>e.jsx("button",{onClick:()=>{E(s),window.scrollTo({top:0,behavior:"smooth"})},className:`${de} ${I===s?me:""}`,children:s},s)),e.jsx("button",{onClick:()=>{E(e=>Math.min(F,e+1)),window.scrollTo({top:0,behavior:"smooth"})},disabled:I===F,className:de,children:"PrÃ³ximo â€º"}),e.jsxs("span",{style:{color:"var(--texto-gelo, #ccc)",fontSize:"0.85rem",marginLeft:"12px"},children:[6*(I-1)+1,"â€“",Math.min(6*I,O.length)," de ",O.length]})]})]})]})}),$&&e.jsx(H,{app:$,onClose:()=>D(null)})]})};export{Re as default};
