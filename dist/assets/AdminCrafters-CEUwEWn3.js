import{j as a,c as e,a7 as s,a8 as r,a9 as n,aa as t}from"./index-w4WX6YNc.js";import{r as i}from"./router-5U3rcizL.js";import{f as l,C as c}from"./useAdminRepo-CHEOC2hz.js";import{A as o,S as d}from"./StatusBadge-BgGOtszf.js";import"./realtime-BxkdmVbQ.js";import"./projectsAPI-BIFoCWog.js";import"./dataCache-D0LcSMWP.js";import"./rankingAPI-DhV1vm69.js";import"./userAPI-DA2MkDG5.js";const h="_page_r40nh_7",_="_header_r40nh_19",m="_headerTitle_r40nh_33",j="_headerIcon_r40nh_45",x="_filters_r40nh_89",v="_searchBox_r40nh_103",p="_searchIcon_r40nh_115",u="_searchInput_r40nh_133",N="_filterGroup_r40nh_165",g="_filterSelect_r40nh_179",f="_sortBtn_r40nh_211",C="_craftersGrid_r40nh_247",P="_emptyCard_r40nh_261",b="_emptyState_r40nh_269",S="_crafterCard_r40nh_281",A="_cardHeader_r40nh_303",y="_crafterInfo_r40nh_321",B="_avatar_r40nh_333",I="_avatarPlaceholder_r40nh_347",E="_crafterName_r40nh_373",k="_cardBody_r40nh_385",O="_infoRow_r40nh_399",M="_infoLabel_r40nh_411",T="_infoValue_r40nh_421",w="_pointsBadge_r40nh_439",G="_starIcon_r40nh_463",R="_cardFooter_r40nh_471",$="_editBtn_r40nh_485",q="_deleteBtn_r40nh_487",z="_pagination_r40nh_559",D="_paginationInfo_r40nh_579",F="_paginationControls_r40nh_589",H="_pageNumbers_r40nh_601",K="_pageBtn_r40nh_611",L="_active_r40nh_655",U="_loadingState_r40nh_671",V="_spinner_r40nh_691",X="_loadingOverlay_r40nh_709",Y="_spinnerSmall_r40nh_731",J="_errorState_r40nh_757",Q="_retryBtn_r40nh_787";function W(){const[W,Z]=i.useState(""),[aa,ea]=i.useState(1),[sa,ra]=i.useState(10),[na,ta]=i.useState("nome"),[ia,la]=i.useState("asc"),[ca,oa]=i.useState("all"),da=i.useMemo(()=>({page:aa,limit:sa,search:W,active_only:"active"===ca||"inactive"!==ca&&void 0,order_by:na,order_direction:ia}),[aa,sa,W,ca,na,ia]),{crafters:ha,pagination:_a,loading:ma,error:ja,reload:xa,loadPage:va}=l(da);i.useEffect(()=>{1!==aa&&ea(1)},[aa,W,ca,na,ia]);const pa=a=>{ea(a),va(a)};return ma&&0===ha.length?a.jsx("div",{className:h,children:a.jsxs("div",{className:U,children:[a.jsx("div",{className:V}),a.jsx("p",{children:"Carregando crafters..."})]})}):ja?a.jsx("div",{className:h,children:a.jsx(o,{variant:"outlined",children:a.jsxs("div",{className:J,children:[a.jsx("h3",{children:"Erro ao carregar crafters"}),a.jsx("p",{children:ja}),a.jsx("button",{onClick:xa,className:Q,children:"Tentar novamente"})]})})}):a.jsxs("div",{className:h,children:[a.jsx("header",{className:_,children:a.jsxs("div",{className:m,children:[a.jsx(e,{className:j}),a.jsxs("div",{children:[a.jsx("h1",{children:"Gerenciar Crafters"}),a.jsxs("p",{children:["Total: ",_a.total," | Página ",_a.page," de ",_a.totalPages]})]})]})}),a.jsxs("section",{className:x,children:[a.jsxs("div",{className:v,children:[a.jsx(s,{className:p}),a.jsx("input",{type:"text",placeholder:"Buscar por nome ou email...",value:W,onChange:a=>{return e=a.target.value,Z(e),void ea(1);var e},className:u})]}),a.jsxs("div",{className:N,children:[a.jsxs("select",{value:ca,onChange:a=>oa(a.target.value),className:g,children:[a.jsx("option",{value:"all",children:"Todos os crafters"}),a.jsx("option",{value:"active",children:"Apenas ativos"}),a.jsx("option",{value:"inactive",children:"Apenas inativos"})]}),a.jsxs("select",{value:sa,onChange:a=>{return e=Number(a.target.value),ra(e),void ea(1);var e},className:g,children:[a.jsx("option",{value:5,children:"5 por página"}),a.jsx("option",{value:10,children:"10 por página"}),a.jsx("option",{value:25,children:"25 por página"}),a.jsx("option",{value:50,children:"50 por página"})]}),a.jsxs("select",{value:na,onChange:a=>{return e=a.target.value,na===e?la("asc"===ia?"desc":"asc"):(ta(e),la("asc")),void ea(1);var e},className:g,children:[a.jsx("option",{value:"nome",children:"Ordenar: Nome"}),a.jsx("option",{value:"email",children:"Ordenar: Email"}),a.jsx("option",{value:"points",children:"Ordenar: Pontos"}),a.jsx("option",{value:"active",children:"Ordenar: Status"})]}),a.jsxs("button",{onClick:()=>la("asc"===ia?"desc":"asc"),className:f,children:[(ua=na,na!==ua?"↕️":"asc"===ia?"↑":"↓")," ","asc"===ia?"Asc":"Desc"]})]})]}),a.jsx("section",{className:C,children:0===ha.length?a.jsx(o,{variant:"outlined",className:P,children:a.jsx("div",{className:b,children:a.jsx("p",{children:W||"all"!==ca?"Nenhum crafter encontrado com os filtros aplicados.":"Nenhum crafter cadastrado."})})}):ha.map(e=>a.jsxs(o,{variant:"elevated",hoverable:!0,className:S,children:[a.jsxs("div",{className:A,children:[a.jsxs("div",{className:y,children:[e.avatar_url?a.jsx("img",{src:e.avatar_url,alt:e.nome,className:B}):a.jsx("div",{className:I,children:e.nome?.charAt(0).toUpperCase()}),a.jsx("span",{className:E,children:e.nome})]}),a.jsx(d,{variant:e.active?"success":"error",dot:!0,pulse:e.active,children:e.active?"Ativo":"Inativo"})]}),a.jsxs("div",{className:k,children:[a.jsxs("div",{className:O,children:[a.jsx("span",{className:M,children:"Email"}),a.jsx("span",{className:T,children:e.email||"-"})]}),a.jsxs("div",{className:O,children:[a.jsx("span",{className:M,children:"Pontos"}),a.jsxs("span",{className:w,children:[a.jsx(r,{className:G})," ",e.points||0]})]})]}),a.jsxs("div",{className:R,children:[a.jsxs("button",{className:$,onClick:()=>{},title:"Editar crafter",children:[a.jsx(n,{})," Editar"]}),a.jsxs("button",{className:q,onClick:()=>(async a=>{if(window.confirm("Tem certeza que deseja excluir este crafter?"))try{await c.delete(a),xa()}catch(e){alert("Erro ao excluir crafter: "+e.message)}})(e.id),title:"Excluir crafter",children:[a.jsx(t,{})," Excluir"]})]})]},e.id))}),_a.totalPages>1&&a.jsxs(o,{variant:"outlined",className:z,children:[a.jsxs("div",{className:D,children:["Mostrando ",(_a.page-1)*sa+1," a ",Math.min(_a.page*sa,_a.total)," de ",_a.total]}),a.jsxs("div",{className:F,children:[a.jsx("button",{onClick:()=>pa(_a.page-1),disabled:!_a.hasPrev||ma,className:K,children:"← Anterior"}),a.jsx("div",{className:H,children:Array.from({length:Math.min(5,_a.totalPages)},(e,s)=>{let r;return r=_a.totalPages<=5||_a.page<=3?s+1:_a.page>=_a.totalPages-2?_a.totalPages-4+s:_a.page-2+s,a.jsx("button",{onClick:()=>pa(r),disabled:ma,className:`${K} ${r===_a.page?L:""}`,children:r},r)})}),a.jsx("button",{onClick:()=>pa(_a.page+1),disabled:!_a.hasNext||ma,className:K,children:"Próxima →"})]})]}),ma&&ha.length>0&&a.jsx("div",{className:X,children:a.jsx("div",{className:Y})})]});var ua}export{W as default};
